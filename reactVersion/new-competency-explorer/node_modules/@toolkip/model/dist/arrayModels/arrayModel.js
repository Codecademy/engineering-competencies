"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const abstractClasses_1 = require("../abstractClasses");
const object_helpers_1 = require("@toolkip/object-helpers");
const shared_types_1 = require("@toolkip/shared-types");
class MArray extends abstractClasses_1._KeyedModels {
    _getDefaultValues() {
        return [];
    }
    _map(data, mapFunc) {
        object_helpers_1.map(data, mapFunc);
    }
    _getValue(output, key) {
        return output[key];
    }
    _setValue(output, key, value) {
        if (this._shouldSplice(output, key, value)) {
            output.splice(key, 1);
        }
        else {
            output[key] = value;
        }
    }
    _shouldSplice(output, key, value) {
        if (key < 0) {
            return false;
        }
        if (key >= output.length) {
            return false;
        }
        if (value === undefined) {
            return true;
        }
        if (shared_types_1.isUndefined(value.getData())) {
            return true;
        }
        return false;
    }
    add(element) {
        this._innerSet({
            key: this._innerModel.length,
            value: element
        });
        return true;
    }
}
exports.MArray = MArray;
