"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const identifiable_1 = require("@toolkip/identifiable");
const modelObject_1 = require("./modelObject");
class MIdentifiable extends modelObject_1.MObject {
    get id() { return this.get('id'); }
    set id(data) { this.set('id', data); }
    static get _uniqueKey() { return this.name; }
    static _generateNewId(suffix) {
        const uniqueKey = suffix || this._uniqueKey;
        return identifiable_1.generateUniqueId(uniqueKey, suffix);
    }
    static _updateLastId(lastId, suffix) {
        const uniqueKey = suffix || this._uniqueKey;
        identifiable_1.registerUniqueId(lastId, uniqueKey);
    }
    constructor(dataToCopy, transforms, suffix) {
        super(dataToCopy);
        if (dataToCopy === null || dataToCopy === void 0 ? void 0 : dataToCopy.id) {
            this.constructor._updateLastId(dataToCopy.id, suffix);
        }
        else {
            const newId = this.constructor._generateNewId(suffix);
            this.set('id', newId);
        }
    }
}
exports.MIdentifiable = MIdentifiable;
