"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class CodeEvent {
    constructor(name) {
        this._name = name;
        this._listeners = new Map();
    }
    get listeners() { return new Map(this._listeners); }
    dispatch(target, data) {
        let dispatchData = data;
        dispatchData.target = target;
        dispatchData.name = this._name;
        let listeners = [];
        listeners = listeners.concat(this._listeners.get(target));
        listeners = listeners.concat(this._listeners.get(null));
        for (let cb of listeners) {
            if (!cb) {
                continue;
            }
            cb(dispatchData);
        }
    }
    addEventListener(cb, target) {
        if (!target) {
            target = null;
        }
        let listeners = this._listeners.get(target);
        if (!listeners) {
            listeners = [];
        }
        listeners.push(cb);
        this._listeners.set(target, listeners);
    }
}
exports.CodeEvent = CodeEvent;
