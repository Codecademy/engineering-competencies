"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const manipulate_1 = require("./manipulate");
const shared_types_1 = require("@toolkip/shared-types");
function combineObjects(objA, objB, deep) {
    let ret;
    let tmp;
    let loopThru;
    ret = objA || {};
    if (objB) {
        _loopThru(objB, ret, deep);
    }
    return ret;
}
exports.combineObjects = combineObjects;
function _loopThru(objToCombine, outputObj, deep) {
    if (!objToCombine) {
        return outputObj;
    }
    if (objToCombine.__proto__) {
        outputObj.__proto__ = Object.create(objToCombine.__proto__);
    }
    manipulate_1.map(objToCombine, (value, key) => {
        if (shared_types_1.isNullOrUndefined(value)) {
            return;
        }
        if (deep && (typeof (value) === "object")) {
            let tmp = outputObj[key];
            if (!tmp) {
                outputObj[key] = value;
                return;
            }
            tmp = combineObjects(tmp, value, deep);
            outputObj[key] = tmp;
        }
        else {
            outputObj[key] = value;
        }
    });
}
function reconcileOptions(options, defaults) {
    let key;
    let opt;
    if (!options) {
        options = {};
    }
    ;
    for (key in defaults) {
        if (defaults.hasOwnProperty(key)) {
            opt = options[key];
            if ((opt === undefined) || (opt === null)) {
                options[key] = defaults[key];
            }
        }
    }
    return options;
}
exports.reconcileOptions = reconcileOptions;
